<!DOCTYPE html>
<html>

<head>
<title>Allmoxy Small Coding Project</title>
<meta charset="utf-8">
<link rel="stylesheet" href="main.css">
<script src="main.js"></script>
<script src="product.riot" type="riot"></script>
<script src="https://cdn.jsdelivr.net/npm/riot@4/riot+compiler.min.js"></script>
</head>

<body>

<table>
<caption>Product Grid</caption>

<thead>
<tr>
<th>Title <span class="ptr" onclick="sort('title')">&#9651</span><span class="ptr" onclick="sort('title', true)">&#9661</span></th>
<th>Description <span class="ptr" onclick="sort('desc')">&#9651</span><span class="ptr" onclick="sort('desc', true)">&#9661</span></th>
<th>Price <span class="ptr" onclick="sort('price')">&#9651</span><span class="ptr" onclick="sort('price', true)">&#9661</span></th>
<th>Quantity <span class="ptr" onclick="sort('quant')">&#9651</span><span class="ptr" onclick="sort('quant', true)">&#9661</span></th>
<th>Image</th>
</tr>
</thead>

<tbody>
<tr is='product' id="bob"></tr>
<tr is='product' id="dora"></tr>
<tr is='product' id="barney"></tr>
<tr is='product' id="oscar"></tr>
<tr is='product' id="courage"></tr>
</tbody>

<tfoot>
<tr>
<td><input type="text" id="add-title"></td>
<td><input type="text" id="add-desc"></td>
<td><input type="number" id="add-price"></td>
<td><input type="number" id="add-quant"></td>
<td><input type="file" id="add-img"></td>
<td><input type="button" value="Add item" onclick="addItem()"></td>
</tr>
</tfoot>

</table>

<script>
riot.compile().then
(

() =>
{

products.push
(
riot.mount
(
'[is="product"]#bob', 
{
title: 'Bob',
desc: 'Builder named Bob.',
price: 49.50,
quant: 5,
img: 'https://i.ytimg.com/vi/8kFfHnre85o/maxresdefault.jpg'
}
)[0]
)

products.push
(
riot.mount
(
'[is="product"]#dora', 
{
title: 'Dora',
desc: 'Explorer named Dora.',
price: 34.80,
quant: 1,
img: 'https://i.ytimg.com/vi/wFHmzmOUg3w/maxresdefault.jpg'
}
)[0]
)

products.push
(
riot.mount
(
'[is="product"]#barney', 
{
title: 'Barney',
desc: 'Dinosaur named Barney.',
price: 3.80,
quant: 0,
img: 'https://i.ytimg.com/vi/VAMzVFfx21M/hqdefault.jpg'
}
)[0]
)

products.push
(
riot.mount
(
'[is="product"]#oscar', 
{
title: 'Oscar',
desc: 'Grouch named Oscar.',
price: 233,
quant: 10,
img: 'https://i.ytimg.com/vi/bwYuSIlb9ck/hqdefault.jpg'
}
)[0]
)

products.push
(
riot.mount
(
'[is="product"]#courage', 
{
title: 'Courage',
desc: 'Cowardly dog named Courage.',
price: 123.99,
quant: 34,
img: 'https://i.ytimg.com/vi/cd8DAerKxUA/maxresdefault.jpg'
}
)[0]
)

}

)
</script>

<script>
const newTitle = document.querySelector('#add-title')
const newDesc = document.querySelector('#add-desc')
const newPrice = document.querySelector('#add-price')
const newQuant = document.querySelector('#add-quant')
const newImg = document.querySelector('#add-img')

function addItem()
{
if (!(newTitle.value && newDesc.value && newPrice.value && newQuant.value && newImg.files[0])) return
let row = document.querySelector('tbody').insertRow()
row.setAttribute('is', 'product')
products.push
(
riot.mount
(
'[is="product"]:last-child', 
{
title: newTitle.value,
desc: newDesc.value,
price: newPrice.value,
quant: newQuant.value,
img: URL.createObjectURL(newImg.files[0])
}
)[0]
)

//clear fields
newTitle.value = null
newDesc.value = null
newPrice.value = null
newQuant.value = null
newImg.value = null
}
</script>

</body>

</html>
